# 单词闯关 - 双人对抗版

## 项目概述

这是一个基于现有单词闯关游戏的双人对抗版本升级。在保持原有单人模式完整功能的基础上，新增了实时双人对战功能，通过融合经典小游戏让单词学习更具趣味性和竞技性。

## 功能特点

### 保留的原有功能
- ✅ 完整的单人挑战模式
- ✅ 错题汇总和学习分析
- ✅ 音频系统和音效
- ✅ 管理员配置系统
- ✅ 响应式设计和动画效果

### 新增的双人对战功能
- 🆕 实时双人匹配系统
- 🆕 三个融合小游戏的对战关卡
- 🆕 WebSocket实时通信
- 🆕 对战结果和数据统计

## 技术架构

### 前端
- **框架**: Vanilla JavaScript + Tailwind CSS
- **架构**: iframe导航系统（保持原有架构）
- **通信**: WebSocket客户端
- **兼容性**: 保持与现有代码100%兼容

### 后端
- **服务器**: Node.js + WebSocket (ws库)
- **匹配系统**: 基于年级的智能匹配
- **游戏房间**: 内存存储的房间管理
- **实时通信**: WebSocket双向通信

## 安装和运行

### 1. 安装依赖

```bash
npm install
```

### 2. 启动服务器

```bash
npm start
```

或者开发模式：

```bash
npm run dev
```

### 3. 访问游戏

打开浏览器访问：`http://localhost:3000`

## 游戏流程

### 单人模式（保持不变）
1. 选择"单人挑战"
2. 输入昵称和年级
3. 进行三关卡挑战
4. 查看结果和错题汇总

### 双人对战模式（新增）
1. 选择"双人对战"
2. 输入昵称和年级
3. 等待匹配同年级对手
4. 查看对手信息和游戏规则
5. 进行三关卡对战（每关一个小游戏）
6. 查看对战结果和错题分析

## 小游戏说明

### 关卡一：警察抓小偷
- **机制**: 警察追捕小偷，双方在跑道上移动
- **规则**: 答对前进1步，答错后退1步
- **胜负**: 警察追上小偷获胜，小偷到达终点获胜

### 关卡二：登天梯
- **机制**: 双方攀爬天梯，比拼高度
- **规则**: 答对上升1层，答错下降1层
- **胜负**: 先到达20层者获胜，或最终高度更高者获胜

### 关卡三：词力拔河
- **机制**: 拔河比赛，绳子中心点左右移动
- **规则**: 答对拉绳2格，答错对方得1格
- **胜负**: 将绳子拉过己方8格线获胜

## 项目结构

```
├── index.html              # 主页面
├── package.json            # 项目配置
├── README.md              # 项目说明
├── server/
│   └── websocket-server.js # WebSocket服务器
├── js/
│   ├── main.js            # 主要游戏逻辑（原有）
│   ├── audio.js           # 音频系统（原有）
│   ├── network-manager.js # 网络管理（原有）
│   └── websocket-client.js # WebSocket客户端（新增）
├── screens/
│   ├── welcome.html       # 欢迎页面（已修改）
│   ├── info_input.html    # 单人信息输入（原有）
│   ├── battle_info_input.html # 双人信息输入（新增）
│   ├── matching.html      # 匹配等待页面（新增）
│   ├── battle_ready.html  # 对战准备页面（新增）
│   └── ...               # 其他原有页面
├── css/
│   └── style.css         # 样式文件（原有）
└── data/
    └── renjiaoban/       # 词库数据（原有）
```
