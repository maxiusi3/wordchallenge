# 单词闯关游戏 - 产品需求文档 (PRD)

## 📋 产品概述

### 产品名称
单词闯关 - 在线英语学习游戏

### 产品定位
一款面向3年级到高三学生的互动式英语单词学习游戏，通过游戏化的方式提升英语词汇学习效果，专注于在线双人对战模式。设备支持PC、iPad等多平台。

### 目标用户
- **主要用户**: 3年级到高三学生
- **次要用户**: 英语学习爱好者、教师、家长

### 核心价值
- 🎮 **游戏化学习**: 将枯燥的单词记忆转化为有趣的游戏体验
- 🏆 **竞技互动**: 通过双人对战激发学习动力
- 📊 **个性化学习**: 根据年级提供适配的词库内容
- 📱 **随时随地**: 支持多设备，随时随地学习

## 🎯 功能架构

### 1. 游戏模式

#### 1.1 在线对战模式
**功能描述**: 两名玩家实时对战，通过小游戏形式竞技

**核心流程**:
```
模式选择 → 信息输入 → 匹配等待 → 对战进行 → 结果展示 → 数据统计
```

**关卡设计**:
- **第一关 - 警察抓小偷**: 中译英填空，警察追捕小偷的跑道游戏
- **第二关 - 登天梯**: 英译中选择题，爬梯子竞赛
- **第三关 - 赛车竞速**: 听写练习，赛车竞速游戏

### 2. 匹配系统

#### 2.1 智能匹配
- **年级匹配**: 优先匹配相同年级玩家
- **等待时间**: 最长等待60秒
- **AI备选**: 无真实对手时提供AI助手

#### 2.2 技术实现
- **Firebase**: 主要匹配系统
- **localStorage**: 备选匹配机制
- **跨设备**: 支持不同设备间对战

### 3. 题库系统

#### 3.1 年级覆盖
- **小学**: 3-6年级
- **初中**: 7-9年级  
- **高中**: 高频词汇 + 完整词库

#### 3.2 题型设计
- **填空题**: 根据中文释义输入英文
- **选择题**: 根据英文选择中文释义
- **听写题**: 根据语音输入英文单词

## 🎨 界面设计

### 1. 欢迎页面
```
┌─────────────────────────┐
│      单词闯关游戏        │
│                        │
│    [⚔️ 双人对战]        │
│                        │
│      网络状态: ✅        │
└─────────────────────────┘
```

### 2. 信息输入页面
```
┌─────────────────────────┐
│      准备双人对战！      │
│                        │
│   昵称: [_________]     │
│                        │
│   年级选择:             │
│   [三年级] [四年级]     │
│   [五年级] [六年级]     │
│                        │
│      [开始匹配]         │
└─────────────────────────┘
```

### 3. 匹配等待页面
```
┌─────────────────────────┐
│      正在匹配对手...     │
│                        │
│        🔄 60秒          │
│                        │
│   [取消匹配] [AI对战]    │
└─────────────────────────┘
```

### 4. 对战页面

#### 4.1 关卡1 - 警察抓小偷
```
┌─────────────────────────┐
│  👮‍♂️ 我 3:2 对手 🏃‍♂️    │
│                        │
│  ━━━━━━━━━━━━━━━━━━━━━━  │
│  👮‍♂️        🏃‍♂️         │
│                        │
│      中文: 苹果          │
│   英文: [_____]         │
│                        │
│      [确认答案]         │
└─────────────────────────┘
```

#### 4.2 关卡2 - 登天梯
```
┌─────────────────────────┐
│  😎 我 2:1 对手 🤖       │
│                        │
│  20 ┌─┐    ┌─┐ 20      │
│  15 │😎│    │🤖│ 18      │
│  10 └─┘    └─┘ 10      │
│   5          5         │
│   0          0         │
│                        │
│   英文: computer        │
│   [A.电脑] [B.电视]     │
│   [C.冰箱] [D.洗衣机]   │
└─────────────────────────┘
```

#### 4.3 关卡3 - 赛车竞速
```
┌─────────────────────────┐
│  🏎️ 我 1:0 对手 🚗       │
│                        │
│  🏁━━━━━━━━━━━━━━━━━━🏁  │
│  🏎️              🚗     │
│                        │
│      🔊 [播放音频]      │
│   英文: [_____]         │
│                        │
│      [确认答案]         │
└─────────────────────────┘
```

### 5. 结果页面
```
┌─────────────────────────┐
│      🎉 胜利！          │
│                        │
│     我方 2:1 对方       │
│                        │
│        对战统计          │
│   总用时: 5分32秒        │
│   正确率: 85%           │
│                        │
│   [再来一局] [返回首页]   │
└─────────────────────────┘
```

## 🎮 游戏机制设计

### 1. 对战机制

#### 1.1 胜负规则
- **三局两胜**: 先赢得2关的玩家获胜
- **时间限制**: 单局最长15分钟
- **超时判定**: 超时按当前分数判定胜负

#### 1.2 小游戏规则

**关卡1 - 警察抓小偷**:
- 警察答对前进3格，小偷答对前进2格
- 警察追上小偷获胜，小偷到达终点获胜

**关卡2 - 登天梯**:
- 答对上2格，答错掉下3格
- 最低0格，达到20格获胜

**关卡3 - 赛车竞速**:
- 答对前进，答错不动
- 先到达终点获胜

### 2. 匹配机制

#### 2.1 匹配流程
1. 玩家进入匹配池
2. 系统按年级匹配
3. 60秒内找到对手开始游戏
4. 超时提供AI对手

#### 2.2 AI对手
- 模拟真实玩家行为
- 70%正确率
- 1-3秒响应时间

## 🔧 技术规格

### 1. 前端技术
- **框架**: 原生JavaScript + HTML5
- **样式**: Tailwind CSS
- **音频**: Web Audio API + Edge TTS
- **图标**: Lucide Icons

### 2. 后端服务
- **匹配系统**: Firebase Realtime Database
- **备选方案**: localStorage + 轮询
- **部署**: GitHub Pages

### 3. 设备支持
- **移动端**: iPad, iPhone, Android
- **桌面端**: Chrome, Safari, Edge
- **响应式**: 自适应不同屏幕尺寸

## 📊 数据统计

### 1. 游戏数据
- 对战次数
- 胜负记录
- 答题正确率
- 平均用时

### 2. 学习分析
- 错题统计
- 薄弱知识点
- 学习进度
- 成长轨迹

## 🚀 发布计划

### Phase 1: 核心功能 ✅
- 双人对战基础功能
- 三个小游戏关卡
- 基础匹配系统

### Phase 2: 优化体验 ✅
- Firebase匹配系统
- AI对手机制
- 音效和动画

### Phase 3: 数据分析 🔄
- 详细统计报告
- 学习建议
- 排行榜系统

## 📱 移动端适配

### 1. iPad优化
- 大屏幕布局优化
- 触摸友好的交互
- 横屏模式支持

### 2. 手机适配
- 紧凑型界面设计
- 单手操作优化
- 字体大小自适应

## 🎯 成功指标

### 1. 用户参与度
- 日活跃用户数
- 平均游戏时长
- 用户留存率

### 2. 学习效果
- 词汇掌握率
- 学习完成度
- 用户满意度

### 3. 技术指标
- 匹配成功率 > 90%
- 页面加载时间 < 3秒
- 游戏延迟 < 500ms

---

**产品愿景**: 让英语学习变得有趣、高效、社交化！ 🌟
