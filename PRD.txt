“单词闯关” WebApp 需求文档版本: 1.0

1. 概述
1.1 项目目标
开发一个简单、有趣的、游戏化的Web应用程序（WebApp），用于线下英语单词挑战活动。该应用旨在吸引中小学生参与，通过闯关形式测试其单词掌握程度，并为活动组织者（管理员）提供基础的难度配置功能。
1.2 应用定位
一款运行于iPad上的轻量级闯关游戏，具有即时反馈和明确的成功/失败结果，整体体验类似快节奏的小游戏（如简化版的俄罗斯方块，强调速度和准确性）。
1.3 目标用户
• 主要用户: 参加线下活动的小学生、中学生。
• 管理员: 活动组织者，需要配置活动参数。

2. 功能需求
2.1 用户流程与界面
    • FR01 - 启动与信息输入:
        ◦ 应用启动后展示欢迎界面，包含醒目的“开始挑战”按钮。
        ◦ 点击“开始挑战”后，要求用户输入【昵称】（文本输入框）和选择【年级】（下拉列表或按钮选择器）。
        ◦ 提供“确认开始”按钮，点击后进入第一关。
    • FR02 - 闯关界面:
        ◦ 在所有关卡界面顶部或显著位置应显示关卡进程：当前关卡数、当前题目编号/本关全部题量、本关已答对数/本关目标正确数、当前题目倒计时（从15秒开始）。
        ◦ 界面核心区域根据关卡类型展示题目内容和作答区域。
        ◦ 界面需体现“游戏感”，使用进度条或者简单的视觉元素代表关卡进程。
    • FR03 - 结果展示:
        ◦ 挑战结束后（成功或失败），展示挑战结果页面。
        ◦ 结果页面需明确展示“挑战成功！”或“挑战失败！”的醒目标题。
        ◦ 展示用户昵称、年级、答对题目数、总题目数、总用时（真实用时累加）。
        ◦ 结果页面需提供错题记录，包括所在关卡，题目，正确答案，用户回答的答案（用户超时未作答的显示“超时”）。
        ◦ 提供“返回首页”的按钮。
2.2 核心闯关逻辑
    • FR04 - 关卡结构: 固定为三个关卡。
        ◦ 第一关 (Level 1): 看中文写英文。界面展示中文词义，用户在下划线（如果题目是词组则有多条下划线，以空格分隔）内输入对应英文单词。解读输入下划线的设计：1.三种状态，已输入，输入中，未输入；2.未输入时下划线默认长度为3个字母，随着输入超过3个，下划线跟着延长；3.当用户输入空格时结束当前单词输入（状态由输入中变为已输入），跳到下一个单词的输入（状态由未输入变为输入中），输入退格可以退回；4.输入中的下划线和输入的字母样式与已输入未输入的不同，使用户视觉更集中正在输入的内容上。
        ◦ 第二关 (Level 2): 看英文选中文（四选一）。界面展示英文单词，提供四个中文选项（竖向排列），用户点击选择。
        ◦ 第三关 (Level 3): 听写英文。界面提供“播放”按钮，点击后播放单词读音，用户可以重复点击听发音。用户在与第一关相同的下划线输入听到的英文单词。
    • FR05 - 题库与抽题:
        ◦ 系统需内置按年级区分的题库，不同年级对应不同json文件。
        ◦ 进入挑战时，根据用户选择的年级，从对应题库中 随机抽取 当前关卡所需数量的题目。
        ◦ 确保在单次挑战的所有关卡内，所有抽取的题目不重复（第二关的错误选项也是从年级对应题库中随机抽取，仅当题库太小时可重复）。
    • FR06 - 答题与判定:
        ◦ 时间限制: 三个关卡每道题作答时间限制为 15秒，界面需有清晰可见的倒计时。第一关和第二关加载完题目就自动开始倒计时，第三关等用户第一次点击“播放”按钮后才开始倒计时。倒计时结束未完成作答，视为该题 错误。
        ◦ 尝试机会:
            ■ 第一关、第三关：每题提供 3次 尝试机会。用户提交答案错误后，清空输入框再次尝试。3次机会内任意一次答对，即判定该题 正确。3次均错误，则判定该题 错误。
            ■ 第二关：每题仅 1次 选择机会。选择错误，即判定该题 错误。
        ◦ 答案核对:
            ■ 第一关、第三关：用户输入后需点击“确认”按钮提交。系统判断用户输入是否与标准答案匹配（忽略大小写差异，忽略用户在单词或词组前面和后面输入的空格）。
            ■ 第二关：用户点击选项即提交，并被告知答对或答错，答错的题不要揭晓正确答案。
    • FR07 - 关卡通过与失败:
        ◦ 每关需答对指定数量的题目才能通过（数量由管理员配置）。
        ◦ 实时判定: 在加载 下一道题前，系统需计算：即使后续所有题目全部答对，是否也无法满足通关所需的正确题目数。若是，则直接判定 当前关卡失败，进而导致 挑战失败。
        ◦ 成功完成当前关卡所需数量的题目后，若还有题目未答，则无需再答，直接判定 当前关卡通过。
        ◦ 挑战流程:
            ■ 前一关卡通过后，自动进入下一关卡。
            ■ 三个关卡全部通过，则判定 挑战成功。
            ■ 任意一个关卡判定失败，则立即终止挑战，判定 挑战失败。
2.3 管理员配置功能
    • FR08 - 配置入口与密码:
        ◦ 在欢迎页右上角提供一个图标作为管理员入口。
        ◦ 进入配置页面前，要求输入管理员密码。
        ◦ 默认密码:admin321 (密码在代码中硬编码，无需复杂后台)。
    • FR09 - 可配置项:
        ◦ 可分别为 每个关卡 配置：
            ■ 题目总数: 该关卡需要抽取多少道题目进行挑战。
            ■ 通关所需正确数: 需要答对多少道题目才能通过该关卡。
        ◦ 提供“保存设置”按钮。

3. 非功能需求
3.1 用户体验 (UX/UI)
    • NFR01 - 游戏化视觉: 整体界面风格活泼、色彩明亮，渐变色增加科技感，符合青少年审美，营造轻松愉快的游戏氛围。
    • NFR02 - 交互反馈:
        ◦ 视觉反馈:
            ■ 按钮点击有视觉变化（如下沉、变色）。
            ■ 用户输入前/中/后有视觉变化（如颜色变化或字号增加或变粗等）。
            ■ 答题正确/错误有明显视觉提示（如☑️/✖️图标、边框变绿/红、闪烁）。答题错误时，告知用户还剩几次尝试机会，不要显示正确答案。
            ■ 倒计时剩余5秒时，计时器应有醒目提示（如呼吸闪烁、变色、声音）。
            ■ 进入下一关卡时有过渡动画效果。

        ◦ 声音反馈:
            ■ 重要操作和状态变化应伴有音效。例如：开始挑战音效、答题正确提示音、答题错误提示音、倒计时警告音、挑战成功/失败音效。
            ■ 音效文件wav格式，位于/audio，文件名即是用途，应根据场景适时的调用。
        ◦ 单词发声方式:
            ■ 使用浏览器（如Safari）自带的TTS工具进行发音。
            
    • NFR03 - 易用性: 界面布局直观，操作简单，用户无需学习即可上手。字体大小适中，按钮点击区域足够大，适合iPad触摸操作。
3.2 性能
    • NFR04 - 响应速度: 应用加载、页面跳转、题目切换、答案判定等操作应快速响应，无明显卡顿。
    • NFR05 - 稳定性: 在活动期间应能稳定运行，避免闪退或崩溃。
3.3 技术要求 (建议)
    • NFR06 - 平台: WebApp，能良好运行于iPad上的现代浏览器（如Safari）。
    • NFR07 - 前端实现: 使用现代前端框架（如React）或原生JavaScript实现。题库和配置存储在前端（JSON文件），无需复杂后端数据库。

4. 数据需求
    • DR01 - 题库:
        ◦ 需要按年级（小学3-6年级，初中7-9年级都是与年级对应，高一对应高考高频词，高二高三对应高中全部词）分类的单词数据。
        ◦ 每个单词需要包含：英文拼写、中文释义，音标为可选。
        ◦ 题库应易于更新和维护（通过替换JSON文件，位置在/data）。
    • DR02 - 用户输入: 临时存储用户输入的昵称和选择的年级，用于当次挑战。无需持久化存储用户信息。
    • DR03 - 配置数据: 存储管理员设置的各关卡题目数和通关正确数。